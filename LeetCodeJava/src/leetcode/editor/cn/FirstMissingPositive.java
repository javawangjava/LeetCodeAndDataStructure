/**
 * <p>ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚</p>
 * è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code> å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚
 *
 * <p> </p>
 *
 * <p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,2,0]
 * <strong>è¾“å‡ºï¼š</strong>3
 * </pre>
 *
 * <p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [3,4,-1,1]
 * <strong>è¾“å‡ºï¼š</strong>2
 * </pre>
 *
 * <p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [7,8,9,11,12]
 * <strong>è¾“å‡ºï¼š</strong>1
 * </pre>
 *
 * <p> </p>
 *
 * <p><strong>æç¤ºï¼š</strong></p>
 *
 * <ul>
 * <li><code>1 <= nums.length <= 5 * 10<sup>5</sup></code></li>
 * <li><code>-2<sup>31</sup> <= nums[i] <= 2<sup>31</sup> - 1</code></li>
 * </ul>
 * <div><div>Related Topics</div><div><li>æ•°ç»„</li><li>å“ˆå¸Œè¡¨</li></div></div><br><div><li>ğŸ‘ 1532</li><li>ğŸ‘ 0</li></div>
 */

package leetcode.editor.cn;

import java.util.HashMap;
import java.util.Map;

/**
 * 41
 * ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°
 *
 * @author wangweizhou
 * @date 2022-07-21 19:23:20
 */

public class FirstMissingPositive {
    public static void main(String[] args) {

        //æµ‹è¯•ä»£ç 
        Solution solution = new FirstMissingPositive().new Solution();
        //int[] nums={3,4,-1,1};
        int[] nums = {2, 2};
        int ans = solution.firstMissingPositive(nums);
        System.out.println(ans);

    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {


        //æ–¹æ³•ä¸‰ï¼š æ•°ç»„æ¨¡æ‹Ÿå“ˆå¸Œè¡¨   // å°†æ•°ç»„è§†ä¸ºå“ˆå¸Œè¡¨ è¿™ä¸ªæ¯”æ–¹æ³•äºŒå¥½ç†è§£

        // æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚
        // é•¿åº¦ä¸ºnæ•°ç»„ï¼Œè‹¥å…ƒç´ æ²¡æœ‰é‡å¤ï¼Œåˆ™å¦‚æœæ•°ç»„å¡«æ»¡äº†1~n,é‚£ä¹ˆç¼ºå¤±n+1,å¦‚æœæ•°ç»„å¡«ä¸æ»¡1~n,é‚£ä¹ˆç¼ºå¤±çš„å°±æ˜¯1~nä¸­çš„æ•°å­—ã€‚
        // é‚£ä¹ˆå°±éœ€è¦åœ¨1~nä¸­æ‰¾åˆ°ç¼ºå¤±çš„æ•°ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±åº”è¯¥æ˜¯n+1ã€‚
        // é€šè¿‡éå†æŠŠ[1, n] ä¸­çš„æ­£æ•°æ”¾ç½®åœ¨å¯¹åº”çš„ä½ç½®ä¸Šï¼Œæ•°å€¼ä¸º i çš„æ•°æ˜ å°„åˆ°ä¸‹æ ‡ä¸º i - 1 çš„ä½ç½®ã€‚


        public int firstMissingPositive(int[] nums) {
            if (nums == null) {
                return 1;
            }

            int len = nums.length;
            for (int i = 0; i < len; i++) {
                // nums[i] > 0 && nums[i] <= len è¯´æ˜é‡åˆ°åŒºé—´[1,len]ä¸­çš„æ­£æ•´æ•°ï¼Œ
                // [1,len]ä¸­çš„æ­£æ•´æ•°çš„æ­£ç¡®ä½ç½®ï¼šæ•°å€¼ä¸º i çš„æ•°åœ¨ä¸‹æ ‡ä¸ºï¼ˆi - 1ï¼‰ çš„ä½ç½®ï¼›å³nums[i-1]=iã€‚å³ä¸‹æ ‡æ¯”è¡¨ç¤ºçš„æ­£æ•°å°1ã€‚
                // åœ¨æ­£ç¡®ä½ç½®æ—¶ï¼Œ nums[i]è¡¨ç¤ºçš„æ•°å€¼åº”è¯¥æ˜¯ï¼ˆi+1ï¼‰,åˆ™ï¼ˆnums[i] - 1ï¼‰è¡¨ç¤ºçš„æ•°å€¼ä¸ºiã€‚

                // é‚£ä¹ˆæ­£æ•´æ•°nums[i]æ”¾ç½®åœ¨æ­£ç¡®ä½ç½®åº”è¯¥æ˜¯nums[nums[i] - 1] == nums[i]ã€‚
                // ä¸Šé¢å°±æ˜¯æ£€éªŒæ•°ç»„å€¼ä¸º(i+1ã€å³nums[i]ã€‘ï¼‰æ˜¯å¦æ”¾ç½®åœ¨æ­£ç¡®çš„ä½ç½®ä¸Š(nums[i]ã€å³nums[nums[i] - 1]ã€‘ï¼‰ã€‚
                // è‹¥nums[nums[i] - 1] != nums[i]ã€‚è¿™è¯´æ˜nums[i]æ²¡æœ‰åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šã€‚éªŒè¯ï¼ˆnums[i] - 1==iï¼‰ä¸è¡Œï¼Œç¢°åˆ°æœ‰é‡å¤å…ƒç´ çš„å¯èƒ½ä¼šé”™ã€‚

                while (nums[i] > 0 && nums[i] <= len && nums[nums[i] - 1] != nums[i]) {
                    swap(nums, nums[i] - 1, i);// ä½ç½®ä¸å¯¹æ—¶ï¼Œäº¤æ¢ä½ç½®ï¼Œå…ƒç´ ï¼ˆnums[i] - 1==iï¼‰åº”è¯¥äº¤æ¢åˆ°içš„ä½ç½®
                }
            }


            // æ•°ç»„ä¿®æ”¹æˆä¸‹æ ‡ä¸ºï¼ˆi-1ï¼‰çš„ä½ç½®å­˜æ”¾æ•°å€¼i.
            // é‡æ–°éå†æ•°ç»„ï¼Œæ‰¾å‡ºç¬¬ä¸€ä¸ªæ•°ç»„å€¼ä¸ç­‰ä¸ä¸‹æ ‡çš„é‚£ä¸ªæ•°ï¼Œ
            for (int i = 0; i < len; i++) {
                if (nums[i] != i + 1) {
                    return i + 1;
                }
            }
            // éƒ½æ­£ç¡®åˆ™è¿”å›æ•°ç»„é•¿åº¦ + 1
            return len + 1;
        }


        //äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªå…ƒç´ 
        private void swap(int[] nums, int index1, int index2) {
            int temp = nums[index1];
            nums[index1] = nums[index2];
            nums[index2] = temp;
        }




    /*

	// è§£æ³•1ï¼šå“ˆå¸Œè¡¨
	// nä¸ªé•¿åº¦çš„æ•°ç»„ï¼Œæ²¡æœ‰é‡å¤ï¼Œåˆ™å¦‚æœæ•°ç»„å¡«æ»¡äº†1~n,é‚£ä¹ˆç¼ºå¤±n+1,å¦‚æœæ•°ç»„å¡«ä¸æ»¡1~n,é‚£ä¹ˆç¼ºå¤±çš„å°±æ˜¯1~nä¸­çš„æ•°å­—ã€‚

    public int firstMissingPositive(int[] nums) {
		int length=nums.length;
        // å“ˆå¸Œè¡¨çš„keyå­˜å‚¨ å‡ºç°çš„æ•°å­—ï¼Œvalueè¡¨ç¤ºå‡ºç°æ¬¡æ•°ï¼Œå…¨éƒ¨è®¾ç½®ä¸º1
		Map<Integer,Integer> map=new HashMap<>();
		for (int i = 0; i < length; i++) {//å“ˆå¸Œè¡¨è®°å½•æ•°ç»„ä¸­å‡ºç°çš„æ¯ä¸ªæ•°å­—
			map.put(nums[i],1);
		}
        // ä»1å¼€å§‹éå†ï¼ŒæŸ¥è¯¢å“ˆå¸Œè¡¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªæ•°å­—ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯´æ˜å®ƒå°±æ˜¯æ•°ç»„ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå³æ‰¾åˆ°
		int num=1;
		while(map.containsKey(num)){//ä»1å¼€å§‹æ‰¾åˆ°å“ˆå¸Œè¡¨ä¸­ç¬¬â¼€ä¸ªæ²¡æœ‰å‡ºç°çš„æ­£æ•´æ•°
			num++;
		}
		return num;
    }

    */





        /*

        //â½…æ³•â¼†ï¼šåŸåœ°å“ˆå¸Œï¼ˆæ‰©å±•æ€è·¯ï¼‰  æ²¡çœ‹æ‡‚
        //å‰é¢æåˆ°äº†æ•°ç»„è¦ä¹ˆç¼ºå¤±1~nä¸­çš„æŸä¸ªæ•°å­—ï¼Œè¦ä¹ˆç¼ºå¤±n+1.
        //step1:æˆ‘ä»¬å¯ä»¥å…ˆéå†æ•°ç»„å°†æ‰€æœ‰çš„è´Ÿæ•°éƒ½ä¿®æ”¹æˆn+1.
        //step2ï¼šç„¶åå†éå†æ•°ç»„ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ªå…ƒç´ ç»å¯¹å€¼ä¸è¶…è¿‡næ—¶ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªå…ƒç´ æ˜¯1~nä¸­å‡ºç°çš„å…ƒç´ ï¼Œ
        //æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ•°å€¼å¯¹åº”çš„ä¸‹æ ‡é‡Œçš„å…ƒç´ æ”¹æˆè´Ÿæ•°ï¼Œç›¸å½“äºæ¯ä¸ªå‡ºç°è¿‡çš„æ­£æ•´æ•°çš„ä¸‹æ ‡éƒ½æŒ‡å‘ä¸€ä¸ªè´Ÿæ•°ï¼Œè¿™å°±æ˜¯ç±»ä¼¼å“ˆå¸Œè¡¨çš„å®ç°åŸç†çš„æ“ä½œã€‚
        //step3:æœ€åéå†æ•°ç»„çš„æ—¶å€™ç¢°åˆ°çš„ç¬¬ä¸€ä¸ªéè´Ÿæ•°çš„ä¸‹æ ‡å°±æ˜¯æ²¡æœ‰å‡ºç°çš„ç¬¬ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå› ä¸ºå®ƒåœ¨ä¹‹å‰çš„è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¯´æ˜å®ƒè¿™ä¸ªä¸‹æ ‡çš„æ­£æ•´æ•°æ²¡æœ‰å‡ºç°è¿‡ã€‚

        public int firstMissingPositive(int[] nums) {
            int length = nums.length;
            for (int i = 0; i < length; i++) {//éå†æ•°ç»„
                if (nums[i] <= 0) {//è´Ÿæ•°å…¨éƒ¨è®°ä¸ºn+1
                    nums[i] = length + 1;
                }
            }
            for (int j = 0; j < length; j++) {
                int num = Math.abs(nums[j]);
                if (num <= length) {//å¯¹äº1-nä¸­çš„æ•°å­—,è¿™ä¸ªæ•°å­—çš„ä¸‹æ ‡æ ‡è®°ä¸ºè´Ÿæ•°
                    nums[num - 1] = -1 * Math.abs(nums[num - 1]);
                }
            }
            for (int i = 0; i < length; i++) {
                if (nums[i] > 0) {
                    return i + 1;
                }
            }
            return length + 1;
        }
        */


    }
//leetcode submit region end(Prohibit modification and deletion)

}
