/**
 * <p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œå…¶ä¸­ <code>nums</code> æ˜¯èŒƒå›´ä¸º <code>[1ï¼Œn]</code> çš„æ•´æ•°çš„æ’åˆ—ã€‚è¿˜æä¾›äº†ä¸€ä¸ª 2D
 * æ•´æ•°æ•°ç»„&nbsp;<code>sequences</code>&nbsp;ï¼Œå…¶ä¸­&nbsp;<code>sequences[i]</code>&nbsp;æ˜¯&nbsp;<code>nums</code>&nbsp;
 * çš„å­åºåˆ—ã€‚<br /> æ£€æŸ¥ <code>nums</code> æ˜¯å¦æ˜¯å”¯ä¸€çš„æœ€çŸ­&nbsp;<strong>è¶…åºåˆ—</strong> ã€‚æœ€çŸ­ <strong>è¶…åºåˆ—</strong> æ˜¯
 * <strong>é•¿åº¦æœ€çŸ­</strong> çš„åºåˆ—ï¼Œå¹¶ä¸”æ‰€æœ‰åºåˆ—&nbsp;<code>sequences[i]</code>&nbsp;éƒ½æ˜¯å®ƒçš„å­åºåˆ—ã€‚å¯¹äºç»™å®šçš„æ•°ç»„&nbsp;
 * <code>sequences</code>&nbsp;ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªæœ‰æ•ˆçš„ <strong>è¶…åºåˆ—</strong> ã€‚</p>
 *
 * <ul>
 * <li>ä¾‹å¦‚ï¼Œå¯¹äº&nbsp;<code>sequences = [[1,2],[1,3]]</code>&nbsp;ï¼Œæœ‰ä¸¤ä¸ªæœ€çŸ­çš„ <strong>è¶…åºåˆ—</strong> ï¼Œ<code>[1,2,3]</code> å’Œ
 * <code>[1,3,2]</code> ã€‚</li>
 * <li>è€Œå¯¹äº&nbsp;<code>sequences = [[1,2],[1,3],[1,2,3]]</code>&nbsp;ï¼Œå”¯ä¸€å¯èƒ½çš„æœ€çŸ­ <strong>è¶…åºåˆ—</strong> æ˜¯ <code>[1,2,
 * 3]</code> ã€‚<code>[1,2,3,4]</code> æ˜¯å¯èƒ½çš„è¶…åºåˆ—ï¼Œä½†ä¸æ˜¯æœ€çŸ­çš„ã€‚</li>
 * </ul>
 *
 * <p><em>å¦‚æœ <code>nums</code> æ˜¯åºåˆ—çš„å”¯ä¸€æœ€çŸ­ <strong>è¶…åºåˆ—</strong> ï¼Œåˆ™è¿”å› <code>true</code> ï¼Œå¦åˆ™è¿”å› <code>false</code>
 * ã€‚</em><br /> <strong>å­åºåˆ—</strong> æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ä»å¦ä¸€ä¸ªåºåˆ—ä¸­åˆ é™¤ä¸€äº›å…ƒç´ æˆ–ä¸åˆ é™¤ä»»ä½•å…ƒç´ ï¼Œè€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºçš„åºåˆ—ã€‚</p>
 *
 * <p>&nbsp;</p>
 *
 * <p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], sequences = [[1,2],[1,3]]
 * <strong>è¾“å‡ºï¼š</strong>false
 * <strong>è§£é‡Šï¼š</strong>æœ‰ä¸¤ç§å¯èƒ½çš„è¶…åºåˆ—ï¼š[1,2,3]å’Œ[1,3,2]ã€‚
 * åºåˆ— [1,2] æ˜¯[<u><strong>1,2</strong></u>,3]å’Œ[<u><strong>1</strong></u>,3,<u><strong>2</strong></u>]çš„å­åºåˆ—ã€‚
 * åºåˆ— [1,3] æ˜¯[<u><strong>1</strong></u>,2,<u><strong>3</strong></u>]å’Œ[<u><strong>1,3</strong></u>,2]çš„å­åºåˆ—ã€‚
 * å› ä¸º nums ä¸æ˜¯å”¯ä¸€æœ€çŸ­çš„è¶…åºåˆ—ï¼Œæ‰€ä»¥è¿”å›falseã€‚
 * </pre>
 *
 * <p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], sequences = [[1,2]]
 * <strong>è¾“å‡ºï¼š</strong>false
 * <strong>è§£é‡Šï¼š</strong>æœ€çŸ­å¯èƒ½çš„è¶…åºåˆ—ä¸º [1,2]ã€‚
 * åºåˆ— [1,2] æ˜¯å®ƒçš„å­åºåˆ—ï¼š[<u><strong>1,2</strong></u>]ã€‚
 * å› ä¸º nums ä¸æ˜¯æœ€çŸ­çš„è¶…åºåˆ—ï¼Œæ‰€ä»¥è¿”å›falseã€‚
 * </pre>
 *
 * <p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], sequences = [[1,2],[1,3],[2,3]]
 * <strong>è¾“å‡ºï¼š</strong>true
 * <strong>è§£é‡Šï¼š</strong>æœ€çŸ­å¯èƒ½çš„è¶…åºåˆ—ä¸º[1,2,3]ã€‚
 * åºåˆ— [1,2] æ˜¯å®ƒçš„ä¸€ä¸ªå­åºåˆ—ï¼š[<strong>1,2</strong>,3]ã€‚
 * åºåˆ— [1,3] æ˜¯å®ƒçš„ä¸€ä¸ªå­åºåˆ—ï¼š[<u><strong>1</strong></u>,2,<u><strong>3</strong></u>]ã€‚
 * åºåˆ— [2,3] æ˜¯å®ƒçš„ä¸€ä¸ªå­åºåˆ—ï¼š[1,<u><strong>2,3</strong></u>]ã€‚
 * å› ä¸º nums æ˜¯å”¯ä¸€æœ€çŸ­çš„è¶…åºåˆ—ï¼Œæ‰€ä»¥è¿”å›trueã€‚</pre>
 *
 * <p>&nbsp;</p>
 *
 * <p><strong>æç¤ºï¼š</strong></p>
 *
 * <ul>
 * <li><code>n == nums.length</code></li>
 * <li><code>1 &lt;= n &lt;= 10<sup>4</sup></code></li>
 * <li><code>nums</code>&nbsp;æ˜¯&nbsp;<code>[1, n]</code>&nbsp;èŒƒå›´å†…æ‰€æœ‰æ•´æ•°çš„æ’åˆ—</li>
 * <li><code>1 &lt;= sequences.length &lt;= 10<sup>4</sup></code></li>
 * <li><code>1 &lt;= sequences[i].length &lt;= 10<sup>4</sup></code></li>
 * <li><code>1 &lt;= sum(sequences[i].length) &lt;= 10<sup>5</sup></code></li>
 * <li><code>1 &lt;= sequences[i][j] &lt;= n</code></li>
 * <li><code>sequences</code>&nbsp;çš„æ‰€æœ‰æ•°ç»„éƒ½æ˜¯ <strong>å”¯ä¸€ </strong>çš„</li>
 * <li><code>sequences[i]</code>&nbsp;æ˜¯&nbsp;<code>nums</code> çš„ä¸€ä¸ªå­åºåˆ—</li>
 * </ul>
 *
 * <div><div>Related Topics</div><div><li>å›¾</li><li>æ‹“æ‰‘æ’åº</li><li>æ•°ç»„</li></div></div><br><div><li>ğŸ‘ 68</li><li>ğŸ‘
 * 0</li></div>
 */

package leetcode.editor.cn;

import java.util.*;

/**
 * 444
 * åºåˆ—é‡å»º
 *
 * @author wangweizhou
 * @date 2022-12-14 11:44:21
 */

public class SequenceReconstruction {

    public static void main(String[] args) {
        //æµ‹è¯•ä»£ç 
        Solution solution = new SequenceReconstruction().new Solution();
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {


        //public boolean sequenceReconstruction(int[] nums, List<List<Integer>> sequences) {
        //    if (nums == null || nums.length == 0) {
        //        return false;
        //    }
        //    int len = nums.length;
        //    Map<Integer, Set<Integer>> map = new HashMap<>();
        //    int[] inDegree = new int[len+1];
        //    for (List<Integer> seq : sequences) {
        //        for (Integer in : seq) {
        //            if(in<1||in>nums.length){
        //                return false;
        //            }
        //            map.put(in, new HashSet<>());
        //        }
        //    }
        //
        //
        //    for (List<Integer> seq : sequences) {
        //        for (int i = 0; i < seq.size()-1; i++) {
        //            int num1=seq.get(i);
        //            int num2=seq.get(i+1);
        //            if(!map.get(num1).contains(num2)){
        //                map.get(num1).add(num2);
        //                inDegree[num2]++;
        //            }
        //        }
        //    }
        //
        //
        //    Queue<Integer> queue=new LinkedList<>();
        //    for(int i=1;i<inDegree.length;i++){
        //        if(inDegree[i]==0){
        //            queue.offer(i);
        //        }
        //    }
        //    List<Integer> list=new ArrayList<>();
        //    while (queue.size()==1){
        //        int curr=queue.poll();
        //        list.add(curr);
        //        Set<Integer> set=map.get(curr);
        //        for(Integer in:set){
        //            inDegree[in]--;
        //            if(inDegree[in]==0){
        //                queue.offer(in);
        //
        //            }
        //        }
        //    }
        //    int[] ans=new int[list.size()];
        //    for (int i = 0; i < list.size(); i++) {
        //        ans[i]=list.get(i);
        //    }
        //    return Arrays.equals(nums,ans);
        //}


        // è¶…åºåˆ—å’Œå­åºåˆ—æ˜¯ä¸¤ä¸ªç›¸å¯¹çš„æ¦‚å¿µã€‚å¦‚æœåºåˆ—Aä¸­çš„æ‰€æœ‰å…ƒç´ æŒ‰ç…§å…ˆåé¡ºåºéƒ½åœ¨åºåˆ—Bä¸­å‡ºç°ï¼Œé‚£ä¹ˆåºåˆ—Aæ˜¯åºåˆ—Bçš„å­åºåˆ—ï¼Œåºåˆ—Bæ˜¯åºåˆ—Açš„è¶…åºåˆ—ã€‚

        // æŒ‰ç…§é¢˜ç›®çš„è¦æ±‚ï¼Œå¦‚æœåœ¨seqsçš„æŸä¸ªåºåˆ—ä¸­æ•°å­—iå‡ºç°åœ¨æ•°å­—jçš„å‰é¢ï¼Œé‚£ä¹ˆç”±seqsé‡å»ºçš„åºåˆ—ä¸­æ•°å­—iä¸€å®šä¹Ÿè¦å‡ºç°åœ¨æ•°å­—jçš„å‰é¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé‡å»ºåºåˆ—çš„æ•°å­—é¡ºåºç”±seqsçš„æ‰€æœ‰åºåˆ—å®šä¹‰ã€‚

        // ç”±äº sequences ä¸­çš„æ¯ä¸ªåºåˆ—éƒ½æ˜¯ nums çš„å­åºåˆ—ï¼Œå› æ­¤æ¯ä¸ªåºåˆ—ä¸­çš„æ•°å­—é¡ºåºéƒ½å’Œ nums ä¸­çš„æ•°å­—é¡ºåºä¸€è‡´ã€‚
        // å¯ä»¥å°†seqsä¸­æ¯ä¸ªåºåˆ—çš„æ¯ä¸ªæ•°å­—çœ‹æˆå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸¤ä¸ªç›¸é‚»çš„æ•°å­—ä¹‹é—´æœ‰ä¸€æ¡ä»å‰é¢æ•°å­—æŒ‡å‘åé¢æ•°å­—çš„è¾¹ã€‚
        // å¯ä»¥å°† sequences ä¸­çš„æ‰€æœ‰åºåˆ—çœ‹æˆæœ‰å‘å›¾ï¼Œæ•°å­— 1 åˆ° n åˆ†åˆ«è¡¨ç¤ºå›¾ä¸­çš„ n ä¸ªç»“ç‚¹ï¼Œæ¯ä¸ªåºåˆ—ä¸­çš„ç›¸é‚»æ•°å­—è¡¨ç¤ºçš„ç»“ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡æœ‰å‘è¾¹ã€‚
        // å¦‚æœå¾—åˆ°çš„æ˜¯æœ‰å‘å›¾çš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œé‚£ä¹ˆä»»æ„ä¸€æ¡è¾¹çš„èµ·å§‹èŠ‚ç‚¹åœ¨æ‹“æ‰‘æ’åºåºåˆ—ä¸­ä¸€å®šä½äºç»ˆæ­¢èŠ‚ç‚¹çš„å‰é¢ã€‚
        // å› æ­¤ï¼Œç”±seqsé‡å»ºçš„åºåˆ—å°±æ˜¯ç”±seqsæ„å»ºçš„æœ‰å‘å›¾çš„æ‹“æ‰‘æ’åºçš„åºåˆ—ã€‚è¿™ä¸ªé—®é¢˜å°±è½¬å˜æˆåˆ¤æ–­ä¸€ä¸ªæœ‰å‘å›¾çš„æ‹“æ‰‘æ’åºåºåˆ—æ˜¯å¦å”¯ä¸€ã€‚
        // ä¸ºäº†åˆ¤æ–­ nums æ˜¯ä¸æ˜¯åºåˆ—çš„å”¯ä¸€æœ€çŸ­è¶…åºåˆ—ï¼Œåªéœ€è¦åˆ¤æ–­æ ¹æ® sequences ä¸­çš„æ¯ä¸ªåºåˆ—æ„é€ è¶…åºåˆ—çš„ç»“æœæ˜¯å¦å”¯ä¸€ã€‚


        // ä»£ç é¦–å…ˆæ ¹æ®åºåˆ—åˆ—è¡¨seqsæ„å»ºæœ‰å‘å›¾ï¼Œæœ‰å‘å›¾ä»¥é‚»æ¥è¡¨çš„å½¢å¼ç”¨HashMapç±»å‹çš„graphä¿å­˜ã€‚
        // åŒæ—¶ï¼Œç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦å¹¶ä¿å­˜åˆ°å¦ä¸€ä¸ªHashMapç±»å‹çš„inDegreesä¸­ã€æ ¹æ®æœ‰å‘è¾¹è®¡ç®—æ¯ä¸ªç»“ç‚¹çš„å…¥åº¦ã€‘ã€‚
        // æ¥ä¸‹æ¥å¯¹æ„å»ºçš„æœ‰å‘å›¾æŒ‰ç…§å¹¿åº¦ä¼˜å…ˆæœç´¢è¿›è¡Œæ‹“æ‰‘æ’åºã€‚
        // é˜Ÿåˆ—queueä¸­ä¿å­˜çš„æ˜¯å…¥åº¦ä¸º0çš„èŠ‚ç‚¹ã€‚å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç»“ç‚¹æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œè¿›è¡Œæ‹“æ‰‘æ’åºã€‚æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°æ‹“æ‰‘æ’åºåºåˆ—ä¸­ï¼Œ
        // ç„¶åå°†æ‰€æœ‰ä¸è¯¥èŠ‚ç‚¹ç›¸é‚»çš„èŠ‚ç‚¹çš„å…¥åº¦å‡1ï¼ˆç›¸å½“äºåˆ é™¤æ‰€æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºèµ·å§‹èŠ‚ç‚¹çš„è¾¹ï¼‰ï¼Œå¦‚æœå‘ç°æœ‰æ–°çš„å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åˆ™æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹ä¸­ã€‚
        // æ¯ä¸€è½®æ‹“æ‰‘æ’åºæ—¶ï¼Œé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°è¡¨ç¤ºå¯ä»¥ä½œä¸ºè¶…åºåˆ—ä¸‹ä¸€ä¸ªæ•°å­—çš„å…ƒç´ ä¸ªæ•°ï¼Œæ ¹æ®é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œã€‚
        // å¦‚æœé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°å¤§äº 1ï¼Œåˆ™è¶…åºåˆ—çš„ä¸‹ä¸€ä¸ªæ•°å­—ä¸å”¯ä¸€ï¼Œå› æ­¤ nums ä¸æ˜¯å”¯ä¸€çš„æœ€çŸ­è¶…åºåˆ—ï¼Œè¿”å› falseã€‚
        // å¦‚æœé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ç­‰äº 1ï¼Œåˆ™è¶…åºåˆ—çš„ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„æ•°å­—ã€‚å°†è¯¥æ•°å­—ä»é˜Ÿåˆ—ä¸­å–å‡ºï¼Œå°†è¯¥æ•°å­—æŒ‡å‘çš„æ¯ä¸ªæ•°å­—çš„å…¥åº¦å‡ 1ï¼Œå¹¶å°†å…¥åº¦å˜æˆ 0 çš„æ•°å­—æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚
        // é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°å‡ºç°é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸ç­‰äº 1 çš„æƒ…å†µã€‚
        // å¦‚æœé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°å¤§äº 1ï¼Œåˆ™ nums ä¸æ˜¯å”¯ä¸€çš„æœ€çŸ­è¶…åºåˆ—ï¼Œè¿”å› falseã€‚
        // å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™å®Œæ•´çš„æ‹“æ‰‘æ’åºç»“æŸï¼Œnums æ˜¯å”¯ä¸€çš„æœ€çŸ­è¶…åºåˆ—ï¼Œè¿”å› trueã€‚


        // ç”±äºç›®æ ‡æ˜¯åˆ¤æ–­å›¾çš„æ‹“æ‰‘æ’åºåºåˆ—æ˜¯å¦å”¯ä¸€ï¼Œè€Œå½“æŸä¸ªæ—¶åˆ»é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹æ•°ç›®å¤§äº1æ—¶ï¼Œå°±çŸ¥é“æ­¤æ—¶æœ‰å¤šä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹ï¼Œ
        // é‚£ä¹ˆæŒ‰ä»»æ„é¡ºåºæ’åˆ—è¿™ä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹éƒ½èƒ½ç”Ÿæˆæœ‰æ•ˆçš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œå› æ­¤æ‹“æ‰‘æ’åºçš„åºåˆ—ä¸æ˜¯å”¯ä¸€çš„ã€‚
        // ç”±æ­¤å¯çŸ¥ï¼Œä¸Šè¿°ä»£ç åªåœ¨é˜Ÿåˆ—çš„å¤§å°ä¸º1çš„æ—¶å€™é‡å¤æ·»åŠ å…¥åº¦ä¸º0çš„èŠ‚ç‚¹ã€‚


        // è§£æ³•1ï¼šæ‹“æ‰‘æ’åº   å’Œ269 ç«æ˜Ÿè¯å…¸ æ€è·¯ç±»ä¼¼ï¼Œåªæ˜¯æœ€åå¤šäº†ä¸€ä¸ªéªŒè¯æ˜¯åŒä¸€ä¸ªåºåˆ—çš„æ“ä½œ
        // åˆ¤æ–­èƒ½å¦ç”±sequencesé‡å»ºnums
        public boolean sequenceReconstruction(int[] nums, List<List<Integer>> sequences) {
            // æ³¨æ„å‚æ•°List<List<Integer>>sequencesæ˜¯é›†åˆåµŒå¥—
            if (nums == null || nums.length == 0 || sequences == null) {
                return false;
            }
            // éå†sequencesçš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œå»ºç«‹æ¯ä¸€ä¸ªæ•°å­—çš„å­å›¾å’Œå…¥åº¦è¡¨ï¼Œè¿™æ—¶å€™å»ºç«‹çš„æ˜¯ç©ºå›¾
            // æœ‰å‘å›¾ä»¥é‚»æ¥è¡¨çš„å½¢å¼ç”¨HashMapç±»å‹çš„graphä¿å­˜ã€‚å“ˆå¸Œè¡¨çš„é”®æ˜¯æ•°å­—ï¼Œå€¼æ˜¯è¯¥æ•°å­—çš„åç»­æ•°å­—ç»„æˆçš„é›†åˆã€‚åç»­æ•°å­—æ˜¯å¤šä¸ªï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å“ˆå¸Œè¡¨HashSetæ¥ä¿å­˜
            Map<Integer, Set<Integer>> graph = new HashMap<>();
            // ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦å¹¶ä¿å­˜åˆ°å¦ä¸€ä¸ªHashMapç±»å‹çš„inDegreesä¸­
            Map<Integer, Integer> inDegrees = new HashMap<>();

            for (List<Integer> seq : sequences) {
                // éå†sequenceså»ºç«‹æœ‰å‘å›¾
                // æ‰¾å‡ºå•è¯åˆ—è¡¨wordsä¸­å‡ºç°çš„æ‰€æœ‰å­—æ¯å¹¶åšç›¸åº”çš„åˆå§‹åŒ–ã€‚å…¶å®å°±æ˜¯å»ºç«‹åªæœ‰é”®æ²¡æœ‰å€¼çš„ç©ºå“ˆå¸Œè¡¨
                for (int num : seq) {
                    if (num < 1 || num > nums.length) {// é¢˜ç›®æŒ‡å®šæ•°å­—æ˜¯1~nä¸­çš„æ•°å­—ï¼Œæœ¬è´¨å°±æ˜¯åˆ¤æ–­è¶Šç•Œ
                        return false;
                    }
                    graph.put(num, new HashSet<>());
                    inDegrees.put(num, 0);
                }
            }

            // éå†sequenceså»ºç«‹æœ‰å‘å›¾ï¼Œè¿™æ¬¡æ‰æ˜¯å»ºç«‹å®é™…çš„æœ‰å‘å›¾
            for (List<Integer> seq : sequences) {
                // æ‰¾å‡ºæ¯ä¸ªå­åºåˆ—ä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„æ•°å­—ï¼Œå»ºç«‹ä»å‰ä¸€ä¸ªæ•°å­—æŒ‡å‘åä¸€ä¸ªæ•°å­—çš„è¾¹ã€‚
                for (int i = 0; i < seq.size() - 1; i++) {
                    int num1 = seq.get(i);
                    int num2 = seq.get(i + 1);
                    // å¦‚æœnum1çš„é‚»æ¥è¡¨ä¸­ä¸å«num2ã€å³æ²¡æœ‰å»ºç«‹ä»num1åˆ°num2çš„æœ‰å‘è¾¹ã€‘ï¼Œé‚£ä¹ˆå°†num2åŠ å…¥num1çš„é‚»æ¥è¡¨ï¼Œnum2çš„å…¥åº¦åŠ 1ã€‚
                    if (!graph.get(num1).contains(num2)) {
                        graph.get(num1).add(num2);
                        inDegrees.put(num2, inDegrees.get(num2) + 1);
                    }
                }
            }

            // åœ¨æ„å»ºæœ‰å‘å›¾ä¹‹åï¼Œé‡‡ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢å®ç°æ‹“æ‰‘æ’åºã€‚é˜Ÿåˆ—ä¸­ä¿å­˜çš„æ˜¯å…¥åº¦ä¸º0çš„èŠ‚ç‚¹ã€‚
            Queue<Integer> queue = new LinkedList<>();
            for (int num : inDegrees.keySet()) {// éå†ä¿å­˜æ¯ä¸ªå­—ç¬¦å…¥åº¦çš„é›†åˆï¼Œå°†å…¥åº¦ä¸º0çš„å­—ç¬¦å…¨éƒ¨åŠ å…¥é˜Ÿåˆ—
                if (inDegrees.get(num) == 0) {
                    queue.add(num);
                }
            }

            List<Integer> newSeq = new LinkedList<>();
            // ç”±äºç›®æ ‡æ˜¯åˆ¤æ–­å›¾çš„æ‹“æ‰‘æ’åºåºåˆ—æ˜¯å¦å”¯ä¸€ï¼Œè€Œå½“æŸä¸ªæ—¶åˆ»é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹æ•°ç›®å¤§äº1æ—¶ï¼Œå°±çŸ¥é“æ­¤æ—¶æœ‰å¤šä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŒ‰ä»»æ„é¡ºåºæ’åˆ—è¿™ä¸ªå…¥åº¦ä¸º0çš„èŠ‚ç‚¹éƒ½èƒ½ç”Ÿæˆæœ‰æ•ˆçš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œå› æ­¤æ‹“æ‰‘æ’åºçš„åºåˆ—ä¸æ˜¯å”¯ä¸€çš„ã€‚
            // ç”±æ­¤å¯çŸ¥ï¼Œä¸Šè¿°ä»£ç åªåœ¨é˜Ÿåˆ—çš„å¤§å°ä¸º1çš„æ—¶å€™é‡å¤æ·»åŠ å…¥åº¦ä¸º0çš„èŠ‚ç‚¹ã€‚
            // æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°æ‹“æ‰‘æ’åºåºåˆ—ä¸­ï¼Œç„¶åå°†æ‰€æœ‰ä¸è¯¥èŠ‚ç‚¹ç›¸é‚»çš„èŠ‚ç‚¹çš„å…¥åº¦å‡1ï¼ˆç›¸å½“äºåˆ é™¤æ‰€æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºèµ·å§‹èŠ‚ç‚¹çš„è¾¹ï¼‰ï¼Œå¦‚æœå‘ç°æœ‰æ–°çš„å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åˆ™æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹ä¸­ã€‚
            while (queue.size() == 1) {
                int num = queue.remove();
                newSeq.add(num);
                for (int next : graph.get(num)) {
                    inDegrees.put(next, inDegrees.get(next) - 1);
                    if (inDegrees.get(next) == 0) {
                        queue.add(next);
                    }
                }
            }
            // å°†é›†åˆè½¬æ¢ä¸ºæ•°ç»„ï¼Œå¹¶éªŒè¯æ•°ç»„æ˜¯å¦ç›¸ç­‰
            int[] result = new int[newSeq.size()];
            //result = newSeq.stream().mapToInt(i -> i).toArray();// å°†é›†åˆè½¬æ¢ä¸ºæ•´æ•°å‹æ•°ç»„
            for (int i = 0; i < newSeq.size(); i++) {
                result[i]=newSeq.get(i);
            }
            return Arrays.equals(result, nums);
        }




        //// è§£æ³•2ï¼šæ‹“æ‰‘æ’åº
        //// ä¸‹é¢è¿™ä¸ªæ²¡æœ‰éªŒè¯æ‹“æ‰‘æ’åºæ˜¯å¦æ˜¯é‡å»ºçš„å”¯ä¸€åºåˆ—
        //public boolean sequenceReconstruction(int[] nums, List<List<Integer>> sequences) {
        //    if (nums == null || nums.length == 0 || sequences == null) {
        //        return false;
        //    }
        //    // æœ‰å‘å›¾ä»¥é‚»æ¥è¡¨çš„å½¢å¼ç”¨HashMapç±»å‹çš„graphä¿å­˜ã€‚å“ˆå¸Œè¡¨çš„é”®æ˜¯æ•°å­—ï¼Œå€¼æ˜¯è¯¥æ•°å­—çš„åç»­æ•°å­—ç»„æˆçš„é›†åˆã€‚åç»­æ•°å­—æ˜¯å¤šä¸ªï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å“ˆå¸Œè¡¨HashSetæ¥ä¿å­˜
        //    Map<Integer, Set<Integer>> graph = new HashMap<>();
        //    // å› ä¸ºæ˜¯æ•°å­—1~nã€‚æ‰€ä»¥è¿™é‡Œå°†æ•°ç»„å³ç§»ä¸€ä½è¡¨ç¤ºæ•°å­—çš„å…¥åº¦ï¼Œæ–¹ä¾¿å¤„ç†ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸‹æ ‡ä¸º0çš„inDegrees[0]é»˜è®¤ä¸º0ï¼Œä¸èƒ½æ·»åŠ åˆ°æ‹“æ‰‘æ’åºçš„é˜Ÿåˆ—ä¸­
        //    int[] inDegrees = new int[nums.length+1];
        //    // éå†sequenceså»ºç«‹æœ‰å‘å›¾å¹¶åˆå§‹åŒ–ï¼Œå…¶å®å°±æ˜¯å»ºç«‹åªæœ‰é”®æ²¡æœ‰å€¼çš„ç©ºå“ˆå¸Œè¡¨
        //    for (List<Integer> seq : sequences) {
        //        for (int num : seq) {
        //            if (num < 1 || num > nums.length) {
        //                return false;
        //            }
        //            graph.put(num, new HashSet<>());
        //        }
        //    }
        //
        //    // éå†sequenceså»ºç«‹æœ‰å‘å›¾ï¼Œè¿™æ¬¡æ‰æ˜¯å»ºç«‹å®é™…çš„æœ‰å‘å›¾ï¼Œ
        //    for (List<Integer> seq : sequences) {
        //        // æ‰¾å‡ºæ¯ä¸ªå­åºåˆ—ä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„æ•°å­—ï¼Œå»ºç«‹ä»å‰ä¸€ä¸ªæ•°å­—æŒ‡å‘åä¸€ä¸ªæ•°å­—çš„è¾¹ã€‚
        //        for (int i = 0; i < seq.size() - 1; i++) {
        //            int num1 = seq.get(i);
        //            int num2 = seq.get(i + 1);
        //            // å¦‚æœnum1çš„é‚»æ¥è¡¨ä¸­ä¸å«num2ã€å³æ²¡æœ‰å»ºç«‹ä»num1åˆ°num2çš„æœ‰å‘è¾¹ã€‘ï¼Œé‚£ä¹ˆå°†num2åŠ å…¥num1çš„é‚»æ¥è¡¨ï¼Œnum2çš„å…¥åº¦åŠ 1ã€‚
        //            if (!graph.get(num1).contains(num2)) {
        //                graph.get(num1).add(num2);
        //                inDegrees[num2]++;
        //            }
        //        }
        //    }
        //
        //    // åœ¨æ„å»ºæœ‰å‘å›¾ä¹‹åï¼Œé‡‡ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢å®ç°æ‹“æ‰‘æ’åºã€‚é˜Ÿåˆ—ä¸­ä¿å­˜çš„æ˜¯å…¥åº¦ä¸º0çš„èŠ‚ç‚¹ã€‚
        //    Queue<Integer> queue = new LinkedList<>();
        //    for (int i = 1; i < inDegrees.length; i++) {// éå†å…¥åº¦æ•°ç»„ï¼Œå°†å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ä¸­,æ³¨æ„è¿™é‡Œæ˜¯æ•°å­—1~nã€‚
        //        if (inDegrees[i] == 0) {
        //            queue.add(i);
        //        }
        //    }
        //
        //    while (!queue.isEmpty()) {
        //        if (queue.size() > 1) { // å¦‚æœé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°å¤§äº 1ï¼Œåˆ™è¶…åºåˆ—çš„ä¸‹ä¸€ä¸ªæ•°å­—ä¸å”¯ä¸€ï¼Œå› æ­¤ nums ä¸æ˜¯å”¯ä¸€çš„æœ€çŸ­è¶…åºåˆ—ï¼Œè¿”å› falseã€‚
        //            return false;
        //        }
        //        int num = queue.poll();
        //        for (int next : graph.get(num)) {// æ ¹æ®å›¾éå†å½“å‰èŠ‚ç‚¹numçš„åç»­èŠ‚ç‚¹
        //            inDegrees[next]--;
        //            if (inDegrees[next] == 0) {
        //                queue.offer(next);
        //            }
        //        }
        //    }
        //    return true;
        //}


    }
//leetcode submit region end(Prohibit modification and deletion)

}
