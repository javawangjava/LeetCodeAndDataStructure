/**
 * <p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°&nbsp;<code>k</code> ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› <em>è¯¥æ•°ç»„ä¸­å’Œä¸º&nbsp;<code>k</code><strong>&nbsp;
 * </strong>çš„å­æ•°ç»„çš„ä¸ªæ•°&nbsp;</em>ã€‚</p>
 *
 * <p>&nbsp;</p>
 *
 * <p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,1,1], k = 2
 * <strong>è¾“å‡ºï¼š</strong>2
 * </pre>
 *
 * <p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
 *
 * <pre>
 * <strong>è¾“å…¥ï¼š</strong>nums = [1,2,3], k = 3
 * <strong>è¾“å‡ºï¼š</strong>2
 * </pre>
 *
 * <p>&nbsp;</p>
 *
 * <p><strong>æç¤ºï¼š</strong></p>
 *
 * <ul>
 * <li><code>1 &lt;= nums.length &lt;= 2 * 10<sup>4</sup></code></li>
 * <li><code>-1000 &lt;= nums[i] &lt;= 1000</code></li>
 * <li><code>-10<sup>7</sup> &lt;= k &lt;= 10<sup>7</sup></code></li>
 * </ul>
 * <div><div>Related Topics</div><div><li>æ•°ç»„</li><li>å“ˆå¸Œè¡¨</li><li>å‰ç¼€å’Œ</li></div></div><br><div><li>ğŸ‘ 1542</li><li>ğŸ‘
 * 0</li></div>
 */

package leetcode.editor.cn;

import java.util.*;

/**
 * 560
 * å’Œä¸º K çš„å­æ•°ç»„
 *
 * @author wangweizhou
 * @date 2022-06-22 20:18:30
 */

public class SubarraySumEqualsK {
    public static void main(String[] args) {
        //æµ‹è¯•ä»£ç 
        Solution solution = new SubarraySumEqualsK().new Solution();
        int[] nums = {1, 2, 3};
        //int[] nums = {2,3,1,2,4,3};
        int a = solution.subarraySum(nums, 3);
        System.out.println(a);
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {



        public int subarraySum(int[] nums, int k) {
            if(nums==null||nums.length==0){
                return 0;
            }
            int len=nums.length;
            int[] sums=new int[len+1];
            int count=0;
            for (int i = 0; i < len ; i++) {
                sums[i+1]=sums[i]+nums[i];
            }
            Map<Integer,Integer> map=new HashMap<>();
            map.put(sums[0],1);
            for (int i = 0; i < len; i++) {
                if(map.containsKey(sums[i+1]-k)){
                    count+=map.get(sums[i+1]-k);
                }else {
                    map.put(sums[i+1],map.getOrDefault(sums[i+1],0 )+1);
                }
            }
            return count;
        }






        // å‚è§ 525

        //// è§£æ³•2ï¼šå‰ç¼€å’Œæ•°ç»„ã€è®°å¿†åŒ–ã€‘+å“ˆå¸Œè¡¨ä¼˜åŒ–  å†™æ³•3
        //// å› ä¸ºæ»‘åŠ¨çª—å£å·¦è¾¹ç•Œä¸çŸ¥é“ï¼Œæ˜¯åˆ©ç”¨å“ˆå¸Œè¡¨æ¥ç¡®å®šçš„ï¼Œç±»ä¼¼ä¸å·¦å¼€å³é—­ã€‚
        //public int subarraySum(int[] nums, int k) {
        //    if (nums == null || nums.length == 0) {
        //        return 0;
        //    }
        //    int len = nums.length;
        //    int count = 0;// æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
        //    int[] sums = new int[len + 1];// sums[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iã€‘çš„å‰ié¡¹å’Œã€‚å³æˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œï¼Œåˆ™sums[0]==0ã€‚
        //    Map<Integer, Integer> map = new HashMap<>();   // å“ˆå¸Œè¡¨mapçš„é”®keyæ˜¯å‰ç¼€å’Œçš„ï¼Œvalueæ˜¯å¯¹åº”çš„å‰ç¼€å’Œçš„å‡ºç°æ¬¡æ•°
        //    // sums[0]==0ã€‚ä¸‹æ ‡ä¸º0çš„ä½ç½®å‰é¢æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥å‰ç¼€å’Œä¸º 0ï¼Œä¸ªæ•°ä¸º 1ã€‚ç­‰ä»·äºmap.put(0, 1)ã€‚æŠŠè¿™ä¸€ä¸ªå°±ç†è§£ä¸ºç±»ä¼¼åŠ¨æ€ä¼˜åŒ–çš„åˆå§‹çŠ¶æ€
        //    map.put(sums[0], 1);
        //    for (int i = 0; i < len; i++) {// è·å¾—å‰ç¼€å’Œæ•°ç»„
        //        sums[i + 1] = sums[i] + nums[i];
        //    }
        //    for (int i = 0; i < len; i++) {// æŒ‡é’ˆiæ¯ç§»åŠ¨ä¸€ä½ï¼Œæ»‘åŠ¨çª—å£ä¸­å°±æ–°åŠ å…¥ä¸€ä¸ªå…ƒç´ 
        //        // æ»‘åŠ¨çª—å£ä¸­æ¯åŠ å…¥ä¸€ä¸ªå…ƒç´ nums[i]ï¼Œå°±åˆ¤æ–­nums[i]ä¹‹å‰çš„å­æ•°ç»„ä¸­æ˜¯å¦æœ‰å‰ç¼€å’Œä¸ºï¼ˆsums[i+1] - kï¼‰çš„å­åºåˆ—
        //        if (map.containsKey(sums[i + 1] - k)) {
        //            count = count + map.get(sums[i + 1] - k);
        //        }
        //        // å°†[0,i]çš„å‰ç¼€å’ŒåŠ å…¥åˆ°å“ˆå¸Œè¡¨ä¸­
        //        map.put(sums[i + 1], map.getOrDefault(sums[i + 1], 0) + 1);
        //    }
        //    return count;
        //}




        //
        // åœ¨æ±‚ä¸€ä¸ªé•¿åº¦ä¸ºiçš„å­æ•°ç»„çš„æ•°å­—ä¹‹å’Œæ—¶ï¼Œåº”è¯¥æŠŠè¯¥å­æ•°ç»„çœ‹æˆåœ¨é•¿åº¦ä¸ºi-1çš„å­æ•°ç»„çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„æ•°å­—ã€‚
        // å¦‚æœä¹‹å‰å·²ç»æ±‚å‡ºäº†é•¿åº¦ä¸ºi-1çš„å­æ•°ç»„çš„æ•°å­—ä¹‹å’Œï¼Œé‚£ä¹ˆåªè¦å†åŠ ä¸Šæ–°æ·»åŠ çš„æ•°å­—å°±èƒ½å¾—å‡ºé•¿åº¦ä¸ºiçš„å­æ•°ç»„çš„æ•°å­—ä¹‹å’Œï¼Œåªéœ€è¦ä¸€æ¬¡åŠ æ³•ï¼Œå› æ­¤éœ€è¦Oï¼ˆ1ï¼‰çš„æ—¶é—´ã€‚ä¼˜åŒ–ä¹‹åæ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆn2ï¼‰ã€‚
        // ä¸‹é¢æ¢ä¸€ç§æ€è·¯ï¼Œåœ¨ä»å¤´åˆ°å°¾é€ä¸ªæ‰«ææ•°ç»„ä¸­çš„æ•°å­—æ—¶æ±‚å‡ºå‰iä¸ªæ•°å­—ä¹‹å’Œï¼Œå¹¶ä¸”å°†å’Œä¿å­˜ä¸‹æ¥ã€‚æ•°ç»„çš„å‰iä¸ªæ•°å­—ä¹‹å’Œè®°ä¸ºxã€‚
        // å¦‚æœå­˜åœ¨ä¸€ä¸ªjï¼ˆjï¼œiï¼‰ï¼Œæ•°ç»„çš„å‰jä¸ªæ•°å­—ä¹‹å’Œä¸ºx-kï¼Œé‚£ä¹ˆæ•°ç»„ä¸­ä»ç¬¬i+1ä¸ªæ•°å­—å¼€å§‹åˆ°ç¬¬jä¸ªæ•°å­—ç»“æŸçš„å­æ•°ç»„ä¹‹å’Œä¸ºkã€‚
        // è¿™ä¸ªé¢˜ç›®éœ€è¦è®¡ç®—å’Œä¸ºkçš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚
        // å½“æ‰«æåˆ°æ•°ç»„çš„ç¬¬iä¸ªæ•°å­—å¹¶æ±‚å¾—å‰iä¸ªæ•°å­—ä¹‹å’Œæ˜¯xæ—¶ï¼Œéœ€è¦çŸ¥é“åœ¨iä¹‹å‰å­˜åœ¨å¤šå°‘ä¸ªjå¹¶ä¸”å‰jä¸ªæ•°å­—ä¹‹å’Œç­‰äºx-kã€‚
        // æ‰€ä»¥ï¼Œå¯¹æ¯ä¸ªiï¼Œä¸ä½†è¦ä¿å­˜å‰iä¸ªæ•°å­—ä¹‹å’Œï¼Œè¿˜è¦ä¿å­˜æ¯ä¸ªå’Œå‡ºç°çš„æ¬¡æ•°ã€‚åˆ†æåˆ°è¿™é‡Œå°±ä¼šçŸ¥é“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå“ˆå¸Œè¡¨çš„é”®æ˜¯å‰iä¸ªæ•°å­—ä¹‹å’Œï¼Œå€¼ä¸ºæ¯ä¸ªå’Œå‡ºç°çš„æ¬¡æ•°ã€‚


        // è§£æ³•2ï¼šå‰ç¼€å’Œæ•°ç»„ã€è®°å¿†åŒ–ã€‘+å“ˆå¸Œè¡¨ä¼˜åŒ–  å†™æ³•1
        // åœ¨æ»‘åŠ¨çª—å£[0,right]ä¸­æ‰¾åˆé€‚çš„å­æ•°ç»„[left,right]ä½¿å¾—å­æ•°ç»„å’Œç­‰äºkã€‚
        // sums[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iã€‘çš„å‰ié¡¹å’Œã€‚å³æˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œã€‚åˆ™sums[0]==0ã€‚
        // sums[i+1]-sums[j]=kè¡¨ç¤ºå…ƒç´ nums[j-1]åˆ°å…ƒç´ nums[i]çš„å­æ•°ç»„å’Œ,åˆ™åŒºé—´[j,i]çš„å…ƒç´ å’Œä¸ºk,æ³¨æ„ï¼Œjå’Œiå¯ä»¥é‡åˆã€‚åˆ™sums[i+1]-k=sums[j]ã€‚
        // æ³¨æ„åœ¨ä¸‹æ ‡0ä¹‹å‰æ²¡æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºä¸‹æ ‡0ä¹‹å‰çš„æ‰€æœ‰å…ƒç´ çš„å’Œä¸º0ï¼Œå‡ºç°æ¬¡æ•°ä¸º1ã€‚

        //public int subarraySum(int[] nums, int k) {
        //    if (nums == null || nums.length == 0) {
        //        return 0;
        //    }
        //    int length = nums.length;
        //    int count = 0;//æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
        //    Map<Integer, Integer> map = new HashMap<>();   // å“ˆå¸Œè¡¨mapçš„é”®keyæ˜¯å‰ç¼€å’Œçš„ï¼Œvalueæ˜¯å¯¹åº”çš„å‰ç¼€å’Œçš„å‡ºç°æ¬¡æ•°
        //    int[] sums=new int[length+1];// sums[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iã€‘çš„å‰ié¡¹å’Œã€‚å³æˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œï¼Œåˆ™sums[0]==0ã€‚
        //    map.put(sums[0], 1);// sums[0]==0ã€‚ä¸‹æ ‡ä¸º0çš„ä½ç½®å‰é¢æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥å‰ç¼€å’Œä¸º 0ï¼Œä¸ªæ•°ä¸º 1ã€‚ç­‰ä»·äºmap.put(0, 1)ã€‚
        //
        //    // sums[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œã€‚ä¸ºäº†æ–¹ä¾¿ä»ç¬¬ä¸€é¡¹å¼€å§‹è®¡ç®—ï¼Œä¸ç„¶å°±å¾—å•ç‹¬å¤„ç†ç¬¬ä¸€é¡¹
        //    for (int i = 0; i < length; i++) {// æŒ‡é’ˆiæ¯ç§»åŠ¨ä¸€ä½ï¼Œæ»‘åŠ¨çª—å£ä¸­å°±æ–°åŠ å…¥ä¸€ä¸ªå…ƒç´ 
        //        // æ»‘åŠ¨çª—å£ä¸­æ¯åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ›´æ–°å‰ç¼€å’Œï¼Œç„¶åè®¡ç®—åœ¨å½“å‰ä½ç½®ä¹‹å‰æœ‰æ²¡æœ‰å‰ç¼€å’Œä¸ºï¼ˆsums[i+1] - kï¼‰çš„å­åºåˆ—ï¼Œç„¶åå†å°†æ›´æ–°åçš„å‰ç¼€å’Œæ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­
        //        sums[i+1]=sums[i]+nums[i];
        //        // éœ€è¦è®¡ç®—sums[i+1]ä¹‹å‰çš„å­æ•°ç»„ä¸­å‰ç¼€å’Œä¸ºsums[i+1] - kçš„å­æ•°ç»„ä¸ªæ•°ã€‚
        //        count += map.getOrDefault(sums[i+1] - k, 0);
        //        map.put(sums[i+1], map.getOrDefault(sums[i+1], 0) + 1);//å°†å‰ç¼€å’Œsums[i+1]åŠ å…¥map
        //    }
        //    return count;
        //}





        //// è§£æ³•2ï¼šå‰ç¼€å’Œ+å“ˆå¸Œè¡¨ä¼˜åŒ–+æ»šåŠ¨æ•°ç»„  å†™æ³•1ä¼˜åŒ–ä¸ºåŠ¨æ€æ•°ç»„
        //// å“ˆå¸Œè¡¨map: keyï¼šæˆªæ­¢åˆ°å…ƒç´ nums[i]ä¹Ÿå°±æ˜¯æˆªæ­¢åˆ°æ•°ç»„ä¸‹æ ‡içš„å‰ç¼€å’Œï¼Œvalueï¼škey å¯¹åº”çš„å‰ç¼€å’Œçš„ä¸ªæ•°
        //// åœ¨æ»‘åŠ¨çª—å£[0,right]ä¸­æ‰¾åˆé€‚çš„å­æ•°ç»„[left,right]ä½¿å¾—å­æ•°ç»„å’Œç­‰äºk
        //// sums[i+1]-sums[j]=kï¼Œåˆ™åŒºé—´[j,i]çš„å…ƒç´ å’Œä¸ºk,æ³¨æ„ï¼Œjå’Œiå¯ä»¥é‡åˆã€‚åˆ™sums[i+1]-k=sums[j]

        //public int subarraySum(int[] nums, int k) {
        //    if (nums == null || nums.length == 0) {
        //        return 0;
        //    }
        //    int length = nums.length;
        //    int count = 0;// æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
        //    int sum = 0;// åŠ¨æ€æ•°ç»„ï¼Œæ¯æ¬¡è®¡ç®—å‰ç¼€å’Œæ—¶åªéœ€è¦å‰ä¸€ä¸ªä½ç½®çš„å‰ç¼€å’Œ
        //
        //    // å“ˆå¸Œè¡¨map: keyï¼šæˆªæ­¢åˆ°å…ƒç´ nums[i]ä¹Ÿå°±æ˜¯æˆªæ­¢åˆ°æ•°ç»„ä¸‹æ ‡içš„å‰ç¼€å’Œï¼Œvalueï¼škey å¯¹åº”çš„å‰ç¼€å’Œçš„ä¸ªæ•°
        //    Map<Integer, Integer> map = new HashMap<>();
        //    map.put(sum, 1);//å¯¹äºä¸‹æ ‡ä¸º0çš„å…ƒç´ ï¼Œå‰é¢æ²¡æœ‰å…ƒç´ ï¼Œåˆ™è®°å…¶å‰ç¼€å’Œä¸º0ï¼Œä¸ªæ•°ä¸º1
        //
        //    for (int i = 0; i < length; i++) {// æŒ‡é’ˆiæ¯ç§»åŠ¨ä¸€ä½ï¼Œæ»‘åŠ¨çª—å£ä¸­å°±æ–°åŠ å…¥ä¸€ä¸ªå…ƒç´ 
        //        // æ»‘åŠ¨çª—å£ä¸­æ¯åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ›´æ–°å‰ç¼€å’Œï¼Œç„¶åè®¡ç®—åœ¨å½“å‰ä½ç½®ä¹‹å‰æœ‰æ²¡æœ‰å‰ç¼€å’Œä¸ºï¼ˆsums[i+1] - kï¼‰çš„å­åºåˆ—ï¼Œç„¶åå†å°†æ›´æ–°åçš„å‰ç¼€å’Œæ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­
        //        sum += nums[i];//sumè¡¨ç¤ºç´¯åŠ åˆ°nums[i]çš„å’Œï¼Œsumè¡¨ç¤ºæˆªæ­¢åˆ°ä¸‹æ ‡içš„å’Œã€‚
        //        count += map.getOrDefault(sum - k, 0);
        //        map.put(sum, map.getOrDefault(sum, 0) + 1);//å°†ç¬¬ié¡¹çš„å‰ç¼€å’ŒåŠ å…¥map
        //    }
        //    return count;
        //}





        /*

        //è§£æ³•1ï¼šå‰ç¼€å’Œæ•°ç»„+åŒæŒ‡é’ˆå½¢æˆåŠ¨æ€çª—å£ å†™æ³•3
        public int subarraySum(int[] nums, int k) {
            if (nums == null || nums.length == 0) {
                return 0;
            }
            int length = nums.length;
            int count = 0;//æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
            // sumsTo[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]çš„å‰ié¡¹å’Œï¼Œå³æˆªæ­¢åˆ°ä¸‹æ ‡içš„å‰é¡¹å’Œ
            int[] sumsTo = new int[length + 1];
            sumsTo[0] = 0;//å¯¹äºä¸‹æ ‡ä¸º 0 çš„å…ƒç´ ï¼Œå‰é¢æ²¡æœ‰å…ƒç´ ï¼ŒsumsTo[0] = 0ï¼Œ
            // è®¡ç®—å‰ç¼€å’Œæ•°ç»„
            for (int i = 0; i < length; i++) {
                sumsTo[i + 1] = sumsTo[i] + nums[i];
            }

            // åŒæŒ‡é’ˆæ¥ç¡®å®šåŒºé—´å’Œï¼Œæ³¨æ„ä¸‹æ ‡å’Œä»£ç ç»†èŠ‚å‰ååŒ¹é…
            // åœ¨[left,len-1]ä¸­æ‰¾æ‰¾åˆé€‚çš„å­æ•°ç»„[left,right]ä½¿å¾—å­æ•°ç»„å’Œç­‰äºk
            // sumsTo[i+1]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iä¸åŒ…å«ï¼ˆi+1)ã€‘çš„å‰ié¡¹å’Œ
            for (int left = 0;left < length; left++) {
                for (int right = left; right < length; right++) {
                    // sumsTo[right + 1] - sumsTo[left] å°±æ˜¯åŒºé—´å’Œ[left,right],æ³¨æ„å³ç«¯ç‚¹ä¸‹æ ‡åç§»
                    if (sumsTo[right + 1] - sumsTo[left] == k) {
                        count++;
                    }
                }
            }
            return count;
        }
        */




        /*
        //è§£æ³•1ï¼šå‰ç¼€å’Œæ•°ç»„+åŒæŒ‡é’ˆå½¢æˆåŠ¨æ€çª—å£ å†™æ³•4
        // sums[i]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iã€‘çš„å‰ié¡¹å’Œã€‚å³æˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œ
        public int subarraySum(int[] nums, int k) {
            if (nums == null || nums.length == 0) {
                return 0;
            }
            int len=nums.length;
            int count=0;//æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°
            int[] sums=new int[len];
            sums[0]=nums[0];
            // sums[i]è¡¨ç¤ºæˆªæ­¢åˆ°å…ƒç´ nums[i]ã€åŒ…å«iã€‘çš„å‰ié¡¹å’Œã€‚å³æˆªæ­¢åˆ°ä¸‹æ ‡iã€åŒ…å«iã€‘çš„å‰é¡¹å’Œ
            for (int i = 1; i < len; i++) {
                sums[i]=sums[i-1]+nums[i];
            }
           // åœ¨[left,len-1]ä¸­æ‰¾æ‰¾åˆé€‚çš„å­æ•°ç»„[left,right]ä½¿å¾—å­æ•°ç»„å’Œç­‰äºk
            for (int left = 0; left < len; left++) {
                for (int right = left; right < len; right++) {
                    // sums[right]-sums[left]åˆ™è¡¨ç¤º(left,right].æ‰€ä»¥åŒºé—´å’Œè¦åŠ ä¸Šnums[left]ã€‚è¿™æ ·å°±å½¢æˆäº†åŒé—­åŒºé—´
                    if(sums[right]-sums[left]+nums[left]==k){
                        count++;
                    }
                }
            }
            return count;
        }
        */


    }
//leetcode submit region end(Prohibit modification and deletion)

}
